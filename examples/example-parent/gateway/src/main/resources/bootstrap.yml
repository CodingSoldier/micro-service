server:
  port: 8000

spring:
  application:
    name: gateway
  cloud:
    nacos:
      config:
        server-addr: 192.168.1.121:8848
        namespace: namespace-example-dev
        file-extension: yaml
      discovery:
        server-addr: 192.168.1.121:8848
        namespace: namespace-example-dev
    sentinel:
      eager: true
      transport:
        port: 10112
        dashboard: 127.0.0.1:10102
      datasource:
        # 集成 Nacos
        ds1:
          nacos:
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            namespace: ${spring.cloud.nacos.discovery.namespace}
            username: nacos
            password: nacos
            data-id: gateway-flow-rule-sentinel
            group-id: DEFAULT_GROUP
            data-type: json
            rule-type: gw-flow
        ds2:
          nacos:
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            namespace: ${spring.cloud.nacos.discovery.namespace}
            username: nacos
            password: nacos
            data-id: gateway-flow-rule-api-sentinel
            group-id: DEFAULT_GROUP
            data-type: json
            rule-type: gw-api-group
  # sleuth + zipkin 分布式链路追踪
  sleuth:
    sampler:
      # ProbabilityBasedSampler 抽样策略
      probability: 1.0  # 采样比例, 1.0 表示 100%, 默认是 0.1
      # RateLimitingSampler 抽样策略, 设置了限速采集, spring.sleuth.sampler.probability 属性值无效
      rate: 100  # 每秒间隔接受的 trace 量
  zipkin:
    sender:
      # 指定通过什么类型发送消息 默认是 web
      type: WEB
    # 指定 zipkin 的地址
    base-url: http://localhost:10103/

# 单独配置路由json的 data-id、group，使用NacosGatewayConfig承载配置
nacos:
  gateway:
    route:
      config:
        data-id: gateway-dynamic-router-json
        group: DEFAULT_GROUP

management:
  endpoints:
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      show-details: ALWAYS

logging:
  config: classpath:log4j2-spring.xml
  file:
    path: /logs
    name: ${spring.application.name}
  level:
    com:
      github:
        codingsoldier: DEBUG